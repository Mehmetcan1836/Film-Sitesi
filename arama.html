<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arama - Dizicom</title>
    <link rel="shortcut icon" href="img/logos.png" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/movie-grid.css">
    <style>
        body{background:#141414;color:#fff;font-family:Poppins,sans-serif}
        .main-content{min-height:100vh;padding:20px}
        .search-header{background:linear-gradient(135deg, #1f1f1f 0%, #141414 100%);padding:50px 20px;margin-bottom:40px;border-bottom:2px solid #e50914;box-shadow:0 4px 20px rgba(229,9,20,0.2)}
        .search-title{font-size:2rem;font-weight:700;margin-bottom:15px;letter-spacing:0.5px}
        .search-query{color:#e50914;font-weight:bold;text-shadow:0 0 10px rgba(229,9,20,0.3)}
        .result-count{color:#b0b0b0;font-size:1rem;margin-top:10px}
        .filter-chips{display:flex;gap:12px;margin-top:20px;flex-wrap:wrap}
        .filter-chip{background:#2a2a2a;color:#fff;border-radius:25px;padding:10px 20px;border:2px solid #3a3a3a;cursor:pointer;font-weight:500;transition:all 0.3s ease;font-size:0.95rem}
        .filter-chip:hover{border-color:#e50914;background:#2a2a2a;transform:translateY(-2px)}
        .filter-chip.active{background:#e50914;border-color:#e50914;box-shadow:0 0 15px rgba(229,9,20,0.5)}
        .movie-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:25px;margin:40px 0;padding:20px 0}
        .no-results{text-align:center;padding:80px 20px;color:#999;grid-column:1/-1;font-size:1.1rem}
        .loading-spinner{text-align:center;padding:40px 20px;grid-column:1/-1}
    </style>
</head>
<body>
    <div id="header-container"></div>
    <div class="search-header">
        <div class="container">
            <h2 class="search-title">Arama: <span id="sq" class="search-query"></span></h2>
            <p id="rc" class="result-count"></p>
            <div class="filter-chips">
                <button class="filter-chip active" data-type="all">Tümü</button>
                <button class="filter-chip" data-type="movie">Filmler</button>
                <button class="filter-chip" data-type="tv">Diziler</button>
            </div>
        </div>
    </div>
    <main class="main-content">
        <div class="container">
            <div id="sr" class="movie-grid"><div class="no-results">Aranıyor...</div></div>
        </div>
    </main>
    <div id="mediaModal" class="modal fade" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content" style="background:linear-gradient(135deg, #1a1a1a 0%, #141414 100%);border:1px solid rgba(229,9,20,0.3);border-radius:12px">
                <div class="modal-header" style="border-bottom:2px solid rgba(229,9,20,0.2);padding:18px 20px">
                    <h5 id="modalTitle" class="modal-title" style="font-weight:700;color:#fff"></h5>
                    <button class="btn-close btn-close-white" data-bs-dismiss="modal" style="filter:brightness(1.2)"></button>
                </div>
                <div id="modalBody" class="modal-body" style="color:#fff;padding:25px"></div>
            </div>
        </div>
    </div>
    <div id="playerModal" class="modal fade" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content" style="background:linear-gradient(135deg, #1a1a1a 0%, #141414 100%);border:1px solid rgba(229,9,20,0.3);border-radius:12px">
                <div class="modal-header" style="border-bottom:2px solid rgba(229,9,20,0.2);padding:18px 20px">
                    <h5 id="playerTitle" class="modal-title" style="font-weight:700;color:#fff"></h5>
                    <button class="btn-close btn-close-white" data-bs-dismiss="modal" style="filter:brightness(1.2)"></button>
                </div>
                <div class="modal-body p-0">
                    <iframe id="playerIframe" width="100%" height="500" style="border:none;display:block" allow="autoplay;encrypted-media;picture-in-picture" allowfullscreen></iframe>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/header.js"></script>
    <script src="data/app.js"></script>
    <script>
const API='999a2c8d29cd1833fa98446f909f19eb',B='https://api.themoviedb.org/3',I='https://image.tmdb.org/t/p/w342';
const q=new URLSearchParams(window.location.search).get('q')||'';
let f='all',r=[];
document.getElementById('sq').textContent=q?`"${q}"`:' ';
document.querySelectorAll('.filter-chip').forEach(e=>e.onclick=()=>{
document.querySelectorAll('.filter-chip').forEach(c=>c.classList.remove('active'));
e.classList.add('active');f=e.dataset.type;render();
});
async function search(){
if(!q){document.getElementById('sr').innerHTML='<div class="no-results">Terimi girin</div>';return}
document.getElementById('sr').innerHTML='<div style="text-align:center;padding:40px;color:#aaa">Aranıyor...</div>';
try{
const[m,t]=await Promise.all([
fetch(`${B}/search/movie?api_key=${API}&query=${encodeURIComponent(q)}`),
fetch(`${B}/search/tv?api_key=${API}&query=${encodeURIComponent(q)}`)
]);
const movies=(await m.json()).results.map(x=>({...x,media_type:'movie'}));
const tv=(await t.json()).results.map(x=>({...x,media_type:'tv'}));
r=[...movies,...tv].sort((a,b)=>(b.popularity||0)-(a.popularity||0));
render();
}catch(e){document.getElementById('sr').innerHTML='<div class="no-results">Hata</div>'}
}
function render(){
let l=f==='all'?r:r.filter(i=>i.media_type===f);
if(!l.length){document.getElementById('sr').innerHTML='<div class="no-results">Yok</div>';document.getElementById('rc').textContent='0';return}
document.getElementById('rc').textContent=`${l.length} sonuç`;
document.getElementById('sr').innerHTML=l.map(i=>`
<div class="movie-card" onclick="showMediaDetails(${i.id},'${i.media_type}')">
<div class="media-poster-container">
<img src="${i.poster_path?I+i.poster_path:'/placeholder.svg?height=450&width=300'}" alt="${i.title||i.name}" class="media-poster" loading="lazy">
<div class="media-overlay"><i class="fas fa-play play-icon"></i></div>
</div>
<div class="media-info">
<h3 class="media-title">${i.title||i.name}</h3>
<div class="media-rating"><div class="rating-stars"><i class="fas fa-star"></i><span>${i.vote_average?.toFixed(1)||'N/A'}</span></div></div>
</div>
</div>
`).join('');
}
search();
    </script>
</body>
</html>
