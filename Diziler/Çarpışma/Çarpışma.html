<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Çarpışma izle - Dizicom</title>
    <link rel="stylesheet" href="/Diziler/dizistyle.css">
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../../img/favicon.png">
    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preload" as="style" href="css/movie-grid.css" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" as="style" href="css/story-slider.css" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" media="print" onload="this.media='all'">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">

    <noscript>
        <link rel="stylesheet" href="css/movie-grid.css">
        <link rel="stylesheet" href="css/story-slider.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    </noscript>

    <body style="background-color: var(--dark);">
    <!-- Main Content -->
    <div class="content">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="title">
                <i class="fas fa-tv"></i>
                Çarpışma
            </div>
            <img src="/img/Çarpışma.jpg" alt="Çarpışma">
            <ul>
                <li>Çarpışma</li>
                <li><i class="fas fa-film"></i> Aksiyon</li>
                <li><i class="fas fa-laugh-squint"></i> Macera</li>
                <li><i class="fas fa-tv"></i> TV</li>
                <li><i class="far fa-clock"></i> 107 Dk.</li>
                <li><i class="fas fa-list-ol"></i> 24 Bölüm.</li>
                <li><i class="far fa-calendar-alt"></i> 2018 • Final Yaptı</li>
                <li>
                    <span class="tag">IMDb 6.1</span>
                    <span class="tag">+16</span>
                    <span class="tag">4K</span>
                </li>
            </ul>
        </aside>
        
        <!-- Main Content -->
        <main class="main">
            <div class="main-header">
                <h1 class="title">Tüm Bölümler</h1>
            </div>
            
            <!-- About Section -->
            <section class="hakkındas">
                <h3><i class="fas fa-info-circle"></i> Hakkında</h3>
                <p>10 yaşındaki Ben Tennyson ormanda gizemli bir cihaz keşfettiğinde, her biri benzersiz güçlere sahip on farklı uzaylı kahramana dönüşme gücü kazanır. Bu özel yetenekleri elinde bulunduran Ben, başkalarına yardım etmek ve kötülükleri durdurmak için daha büyük bir sorumluluk alması gerektiğini fark eder.</p>
            </section>
             <!-- Header -->
             <div class="search-container">
              <input type="text" class="search-input" id="searchInput" placeholder="Bölüm ara...">
              <button class="search-btn" id="searchBtn">
                  <i class="fas fa-search"></i>
              </button>
          </div>
        <br>
            
            <!-- Season Selector -->
            <div class="season-selector-container mb-4">
                <label for="seasonSelect" class="me-2">Sezon Seçin:</label>
                <select id="seasonSelect" class="form-select d-inline-block w-auto">
                    <option value="all">Tüm Sezonlar</option>
                    <!-- Seasons will be added by JavaScript -->
                </select>
            </div>
            
            <!-- Episode Grid -->
            <div class="episode-grid" id="episodesContainer">
                <!-- Episodes will be loaded here -->
            </div>
            
            <!-- Pagination -->
            <div class="pagination" id="pagination">
                <!-- Pagination will be dynamically generated -->
            </div>
        </main>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Bölüm listenize eklendi</span>
    </div>

    <style>
        /* Season Selector Styles */
        .season-selector-container {
            padding: 10px 20px;
            background-color: #1a1a1a;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .season-selector-container label {
            color: #fff;
            font-weight: 500;
        }
        
        #seasonSelect {
            background-color: #2d2d2d;
            color: #fff;
            border: 1px solid #444;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        #seasonSelect:focus {
            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
            border-color: #0d6efd;
        }
        
        .episode-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px 0;
        }
        
        .episode-card {
            background: #1a1a1a;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        
        .episode-card:hover {
            transform: translateY(-5px);
        }
        
        .episode-thumbnail {
            position: relative;
            padding-top: 56.25%; /* 16:9 Aspect Ratio */
            overflow: hidden;
        }
        
        .episode-thumbnail img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .episode-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .episode-card:hover .episode-overlay {
            opacity: 1;
        }
        
        .play-btn {
            color: #fff;
            font-size: 2.5rem;
            text-decoration: none;
            transition: transform 0.3s ease;
        }
        
        .play-btn:hover {
            transform: scale(1.1);
            color: #fff;
        }
        
        .episode-info {
            padding: 15px;
        }
        
        .episode-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .episode-number {
            color: #aaa;
            font-size: 0.9rem;
        }
        
        .watch-later {
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            font-size: 1.2rem;
            transition: color 0.3s ease;
        }
        
        .watch-later:hover, .watch-later.active {
            color: #ffd700;
        }
        
        .episode-title {
            color: #fff;
            font-size: 1.1rem;
            margin: 0 0 10px 0;
        }
        
        .episode-desc {
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .episode-meta {
            display: flex;
            justify-content: space-between;
            color: #666;
            font-size: 0.8rem;
        }
        
        .episode-meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        @media (max-width: 768px) {
            .episode-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
    
    <script>
        // Watch Later functionality
        let watchLater = JSON.parse(localStorage.getItem('watchLater')) || [];
        
        // Initialize seasons data
        function getSeasons() {
            const seasons = new Set();
            if (window.episodes && Array.isArray(window.episodes)) {
                window.episodes.forEach(episode => {
                    if (episode && episode.season !== undefined) {
                        seasons.add(episode.season);
                    }
                });
            }
            return Array.from(seasons).sort((a, b) => a - b);
        }
        
        // Initialize season selector
        function initSeasonSelector() {
            const seasonSelect = document.getElementById('seasonSelect');
            if (!seasonSelect) return;
            
            const seasons = getSeasons();
            
            // Clear existing options except the first one
            while (seasonSelect.options.length > 1) {
                seasonSelect.remove(1);
            }
            
            // Add season options
            seasons.forEach(season => {
                const option = document.createElement('option');
                option.value = season;
                option.textContent = `Sezon ${season}`;
                seasonSelect.appendChild(option);
            });
            
            // Add event listener
            seasonSelect.addEventListener('change', function() {
                const selectedSeason = this.value;
                if (selectedSeason === 'all') {
                    renderEpisodes(episodes);
                } else {
                    const filteredEpisodes = episodes.filter(episode => 
                        episode && episode.season == selectedSeason
                    );
                    renderEpisodes(filteredEpisodes);
                }
            });
        }
        
        // Sample episode data (in a real app, this would come from an API)
        window.episodes = [
    // Season 1
    {
        id: 1,
        season: 1,
        number: 1,
        title: "1.Bölüm",
        description: "Başkomiser Kadir Adalı, karısı ve kızını bir terör eyleminde kaybetmiş, suçluluk ve acı içinde bunalmış durumdadır. Trafikte yaşanan zincirleme kaza sonrası hayatı, Zeynep, Cemre ve Kerem ile kesişir. Bu olay, tüm hayatlarında bir dönüm noktası olur .",
        image: "/img/carpisma.jpg",
        date: "27.12.2005",
        duration: "22 dk",
        watched: false
    },
    {
        id: 2,
        season: 1,
        number: 2,
        title: "2.Bölüm",
        description: "Kazanın etkisi artarken Zeynep, zor günler yaşayan bir ev kadını olarak borçlarla boğuşur. Kadir, meslek hayatını sorgularken yeni ipuçları peşine düşer. Kerem hapisten yeni çıkmıştır ve cemrenin hayatında karmaşa devam etmektedir .",
        image: "/img/carpisma.jpg",
        date: "13.01.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 3,
        season: 1,
        number: 3,
        title: "3.Bölüm",
        description: "Kadir, Zeynep'in peşine düşer, onun elini kolunu bağlayan sırları çözmeye çalışır. Kerem, kendini giderek karışık işlerin içinde bulur. Cemre, hem iş hem aşk hayatında baskı altındadır.",
        image: "/img/carpisma.jpg",
        date: "14.01.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 4,
        season: 1,
        number: 4,
        title: "4.Bölüm",
        description: "Zeynep ve Kadir arasındaki ilişki derinleşir, Kadir Veli'nin planlarını çözmeye çalışırken Zeynep, kızını geri alabilmek için güçlü bir karar verir.",
        image: "/img/carpisma.jpg",
        date: "21.01.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 5,
        season: 1,
        number: 5,
        title: "5.Bölüm",
        description: "Kadir plan yapar ve devreye girer; Kerem, Ya­kup’la yeni bir yolda gider. Cemre, bu sırada Belma ve Demir’in arasında kalır.",
        image: "/img/carpisma.jpg",
        date: "28.01.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 6,
        season: 1,
        number: 6,
        title: "6.Bölüm",
        description: "Galip ve Veli arasındaki rekabet kızışır; Kerem tehlikeli bir durumda kalır. Zeynep ve Kadir geçmişle bağlantı kurmaya çalışır.",
        image: "/img/carpisma.jpg",
        date: "04.02.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 7,
        season: 1,
        number: 7,
        title: "7.Bölüm",
        description: "Zeynep evladına kavuşur; Adalı ve Kerem karşı karşıya gelir. Veli’ye karşı Zeynep ve Kadir hamle yapar. Cansız, Asiye’nin karşısına dikilir.",
        image: "/img/carpisma.jpg",
        date: "11.02.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 8,
        season: 1,
        number: 8,
        title: "8.Bölüm",
        description: "Cemre, Belma ile yüzleşir. Kadir ve Kerem tuzağa düşürülür. Zeynep derin bir çıkmazda kaybolur.",
        image: "/img/carpisma.jpg",
        date: "18.02.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 9,
        season: 1,
        number: 9,
        title: "9.Bölüm",
        description: "Meral vurulur. Kerem ve Demir çatışır. Zeynep, Selim’le plan yapar. Veli yeniden sahnededir.",
        image: "/img/carpisma.jpg",
        date: "25.02.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 10,
        season: 1,
        number: 10,
        title: "10.Bölüm",
        description: "Zeynep, Veli ile buluşur; Adem Adalı’yı vurdu mu? Meral hayatta kalmaya çalışır.",
        image: "/img/carpisma.jpg",
        date: "04.03.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 11,
        season: 1,
        number: 11,
        title: "11.Bölüm",
        description: "Kadir, annesinin mektubunu okur; Kerem ile Demir karşı karşıya gelir. Meral hamle yapar, Zeynep kızıyla ilgili yeni bilgi bulur.",
        image: "/img/carpisma.jpg",
        date: "11.03.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 12,
        season: 1,
        number: 12,
        title: "12.Bölüm",
        description: "Kadir, Gürcü’yü sorgular; Cansız’ın geçmişi gün yüzüne çıkmaya başlar. Zeynep’le Cemre arasında yeni bağlar kurulurken Meral sıkışır.",
        image: "/img/carpisma.jpg",
        date: "18.03.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 13,
        season: 1,
        number: 13,
        title: "13.Bölüm",
        description: "Kadir ile Cansız baş başa gelir. Yusuf’un geçmişi açığa çıkar. Kerem, babası Cemil ile dostluk kazanır; Zeynep ve Kadir yakınlaşır.",
        image: "/img/carpisma.jpg",
        date: "25.03.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 14,
        season: 1,
        number: 14,
        title: "14.Bölüm",
        description: "Doğum günü partisi Kadir’e sürpriz olur. Veli’ye karşı Zeynep ve Kadir hamle yapar. Cansız, Asiye’nin karşısına dikilir.",
        image: "/img/carpisma.jpg",
        date: "14.01.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 15,
        season: 1,
        number: 15,
        title: "15.Bölüm",
        description: "Selim köşeye sıkışır, Veli Adem’i vurur. Kerem tutuklanır. Zeynep duygusal bir patlamayla hata yapar.",
        image: "/img/carpisma.jpg",
        date: "21.01.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 16,
        season: 1,
        number: 16,
        title: "16.Bölüm",
        description: "Kadir, Cansız’ı aramaya karar verir. Zeynep fragmanlardan anlaşıldığı kadarıyla riskli bir hamle yapar. Veli yeniden sahneye çıkar.",
        image: "/img/carpisma.jpg",
        date: "28.01.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 17,
        season: 1,
        number: 17,
        title: "17.Bölüm",
        description: "Selim intihar eder gibi olur. Veli ve Rus ortaklar devreye girer. Kadir vurulur. Cansız yeni planlar yapar.",
        image: "/img/carpisma.jpg",
        date: "04.02.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 18,
        season: 1,
        number: 18,
        title: "18.Bölüm",
        description: "Zeynep nezarete düşer, Kadir onu kurtarmaya çalışır. Adalı ile Veli pusuda yakalanır. Büyük ihanetler yaşanır.",
        image: "/img/carpisma.jpg",
        date: "11.02.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 19,
        season: 1,
        number: 19,
        title: "19.Bölüm",
        description: "Bomba patlamaz, Ivan yükselir. Zeynep rehine düşer. Kadir, çocukluğuyla yüzleşir. Cansız dikkat çeker.",
        image: "/img/carpisma.jpg",
        date: "18.02.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 20,
        season: 1,
        number: 20,
        title: "20.Bölüm",
        description: "Zarif sorguda; asıl şok Asiye ile gelir. Cemre ve Meral büyük kırılmalar yaşar. Zeynep, Haydar’dan destek ister.",
        image: "/img/carpisma.jpg",
        date: "25.02.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 21,
        season: 1,
        number: 21,
        title: "21.Bölüm",
        description: "Zeynep kaçırılır. Cansız’ın oyunları netleşir. Kadir ve Zeynep sahilde yalnız zaman geçirir. Veli’ye ölümcül bir teklif gelir.",
        image: "/img/carpisma.jpg",
        date: "04.03.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 22,
        season: 1,
        number: 22,
        title: "22.Bölüm",
        description: "Asiye gözlerinin önünde öldürülür. Zeynep ve Cemre hızla çözüm arar. Cansız kızgın ve tehlikeli planlarla ilerler.",
        image: "/img/carpisma.jpg",
        date: "11.03.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 23,
        season: 1,
        number: 23,
        title: "23.Bölüm",
        description: "Zeynep yüzüğünü gören Cemre ile evlilik kararını açıklar. Veli’ye tehdit mesajı gelir, Cansız tekrar sahnede. Zeynep büyük risk altındadır",
        image: "/img/carpisma.jpg",
        date: "18.03.2006",
        duration: "22 dk",
        watched: false
    },
    {
        id: 24,
        season: 1,
        number: 24,
        title: "24.Bölüm",
        description: "Veli, Kadir’in suçunu üstlenerek cezaevine girer. Kadir onu ziyaret eder, dostluk ve hesaplaşma yaşanır. Veli başka koğuşa gidip Demir’le karşılaşır",
        image: "/img/carpisma.jpg",
        date: "25.03.2006",
        duration: "22 dk",
        watched: false
    }
];
        
        // Render episodes
        function renderEpisodes(episodesToRender = window.episodes) {
            const container = document.getElementById('episodesContainer');
            if (!container) return;
            
            container.innerHTML = '';
            
            episodesToRender.forEach(episode => {
                if (!episode || typeof episode !== 'object') return;
                
                const isInWatchLater = watchLater.some(item => item && item.id === episode.id);
                const season = episode.season || 1;
                const number = episode.number || 0;
                const title = episode.title || '';
                const description = episode.description || '';
                const date = episode.date || '';
                const duration = episode.duration || '';
                const image = episode.image || '/img/placeholder.jpg';
                
                const episodeCard = document.createElement('div');
                episodeCard.className = 'episode-card';
                episodeCard.innerHTML = `
                    <div class="episode-thumbnail">
                        <img src="${image}" alt="${title}" onerror="this.src='/img/placeholder.jpg'">
                        <div class="episode-overlay">
                            <a href="../Çarpışma/Sezon${season}/Çarpışma ${season}.Sezon ${number}.Bölüm.html" class="play-btn">
                                <i class="fas fa-play"></i>
                            </a>
                        </div>
                    </div>
                    <div class="episode-info">
                        <div class="episode-header">
                            <span class="episode-number">Sezon ${season} • Bölüm ${number}</span>
                            <button class="watch-later ${isInWatchLater ? 'active' : ''}" data-id="${episode.id}">
                                <i class="far fa-bookmark"></i>
                            </button>
                        </div>
                        <h3 class="episode-title">${title}</h3>
                        <p class="episode-desc">${description}</p>
                        <div class="episode-meta">
                            <span><i class="far fa-calendar-alt"></i> ${date}</span>
                            <span><i class="far fa-clock"></i> ${duration}</span>
                        </div>
                    </div>
                `;
                
                container.appendChild(episodeCard);
            });
            
            // Add event listeners to watch later buttons
            document.querySelectorAll('.watch-later').forEach(button => {
                if (button && button.addEventListener) {
                    button.addEventListener('click', toggleWatchLater);
                }
            });
        }
        
        // Toggle watch later
        function toggleWatchLater(e) {
            if (!e || !e.currentTarget) return;
            
            const button = e.currentTarget;
            const episodeId = parseInt(button.dataset.id, 10);
            if (isNaN(episodeId)) return;
            
            const episode = window.episodes.find(ep => ep && ep.id === episodeId);
            if (!episode) return;
            
            const index = watchLater.findIndex(item => item && item.id === episodeId);
            
            if (index === -1) {
                watchLater.push({...episode});
                button.classList.add('active');
                showToast('Bölüm listenize eklendi');
            } else {
                watchLater.splice(index, 1);
                button.classList.remove('active');
                showToast('Bölüm listenizden kaldırıldı');
            }
            
            try {
                localStorage.setItem('watchLater', JSON.stringify(watchLater));
            } catch (error) {
                console.error('Error saving to localStorage:', error);
            }
        }
        
        // Show toast notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            
            if (!toast || !toastMessage) return;
            
            toastMessage.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // Search functionality
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        
        function handleSearch() {
            if (!searchInput) return;
            
            const searchTerm = searchInput.value.toLowerCase().trim();
            if (!searchTerm) {
                renderEpisodes(episodes);
                const seasonSelect = document.getElementById('seasonSelect');
                if (seasonSelect) seasonSelect.value = 'all';
                return;
            }
            
            const filteredEpisodes = episodes.filter(episode => {
                if (!episode) return false;
                const title = episode.title ? episode.title.toLowerCase() : '';
                const description = episode.description ? episode.description.toLowerCase() : '';
                return title.includes(searchTerm) || description.includes(searchTerm);
            });
            
            renderEpisodes(filteredEpisodes);
        }
        
        searchBtn.addEventListener('click', handleSearch);
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleSearch();
            }
        });
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize season selector
            initSeasonSelector();
            
            // Initial render
            if (window.episodes && window.episodes.length > 0) {
                renderEpisodes(window.episodes);
                
                // Initialize view toggle
                const viewButtons = document.querySelectorAll('.view-btn');
                const episodesContainer = document.getElementById('episodesContainer');
                
                if (viewButtons.length > 0 && episodesContainer) {
                    viewButtons.forEach(button => {
                        button.addEventListener('click', () => {
                            viewButtons.forEach(btn => btn.classList.remove('active'));
                            button.classList.add('active');
                            
                            if (button.dataset.view === 'list') {
                                episodesContainer.classList.add('list-view');
                            } else {
                                episodesContainer.classList.remove('list-view');
                            }
                        });
                    });
                }
            }
        });
    </script>
    <script src="/js/header.js"></script>
</body>
</html>